@import "tailwindcss";
@import "../styles/tokens.css";
@import "../styles/themes.css";
@import "../styles/fonts.css";

@theme inline {
  /* Map tokens to Tailwind utilities — use only these in components */
  --color-background-primary: var(--background-primary);
  --color-background-secondary: var(--background-secondary);
  --color-background-tertiary: var(--background-tertiary);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-tertiary: var(--text-tertiary);
  --color-border-default: var(--border-default);
  --color-border-subtle: var(--border-subtle);
  --color-button-primary: var(--button-primary-bg);
  --color-button-primary-hover: var(--button-primary-hover);
  --color-button-secondary: var(--button-secondary-bg);
  --color-button-secondary-hover: var(--button-secondary-hover);
  --color-button-destructive-text: var(--button-destructive-text);
  --color-link-default: var(--link-default);
  --color-link-hover: var(--link-hover);
  --color-input-bg: var(--input-bg);
  --color-input-border: var(--input-border);
  --color-input-placeholder: var(--input-placeholder);
  --color-badge-live: var(--badge-live);
  --color-badge-building: var(--badge-building);
  --color-badge-error: var(--badge-error);
  --color-badge-neutral: var(--badge-neutral);
  --color-semantic-success: var(--semantic-success);
  --color-semantic-warning: var(--semantic-warning);
  --color-semantic-error: var(--semantic-error);
  --color-semantic-info: var(--semantic-info);

  /* --font-sans is Geist (fonts.css). Use for all UI copy. */
  --font-mono: var(--font-geist-mono);
}

body {
  background: var(--background-primary);
  color: var(--text-primary);
  font-family: var(--font-sans), system-ui, sans-serif;
}

/* Type scale — use these classes for consistent hierarchy */
.text-heading-hero {
  font-size: var(--text-5xl);
  font-weight: 700;
  line-height: 1.1;
  color: var(--text-primary);
}
.text-heading-section {
  font-size: var(--text-3xl);
  font-weight: 600;
  color: var(--text-primary);
}
.text-heading-card {
  font-size: var(--text-xl);
  font-weight: 600;
  color: var(--text-primary);
}
.text-body {
  font-size: var(--text-base);
  color: var(--text-primary);
}
.text-body-muted {
  font-size: var(--text-sm);
  color: var(--text-secondary);
}
.text-caption {
  font-size: var(--text-xs);
  color: var(--text-tertiary);
}

/* Terms / long-form: readable width and in-article links */
.prose-terms a {
  color: var(--link-default);
  text-decoration: none;
  transition: color var(--transition-fast);
}
.prose-terms a:hover {
  color: var(--link-hover);
}

/* Docs: prose and code blocks */
.prose-docs {
  max-width: 65ch;
}
.prose-docs a {
  color: var(--link-default);
  text-decoration: none;
  transition: color var(--transition-fast);
}
.prose-docs a:hover {
  color: var(--link-hover);
}
.prose-docs ul, .prose-docs ol {
  margin: 0.75rem 0;
  padding-left: 1.5rem;
}
.prose-docs li {
  margin: 0.25rem 0;
}
.prose-docs code {
  font-family: var(--font-geist-mono), monospace;
  font-size: 0.9em;
  padding: 0.15em 0.4em;
  border-radius: var(--radius-sm);
  background: var(--background-tertiary);
  color: var(--text-primary);
}
.prose-docs pre {
  margin: 1rem 0;
  padding: 1rem 1.25rem;
  border-radius: var(--radius-md);
  background: var(--background-tertiary);
  border: 1px solid var(--border-default);
  overflow-x: auto;
}
.prose-docs pre code {
  padding: 0;
  background: none;
  font-size: 13px;
  line-height: 1.5;
}

@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fade-in var(--transition-slow) ease-out forwards;
}

.animate-fade-in-fast {
  animation: fade-in 200ms ease-out forwards;
}

/* LIVE badge soft glow — professional pulse */
@keyframes live-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.25);
  }
  50% {
    box-shadow: 0 0 12px 2px rgba(34, 197, 94, 0.2);
  }
}

.animate-live-glow {
  animation: live-glow 2s ease-in-out infinite;
}

/* Very subtle screen shimmer when "streaming" (optional) */
@keyframes screen-shine {
  0% { opacity: 0.03; }
  50% { opacity: 0.06; }
  100% { opacity: 0.03; }
}

.animate-screen-shine {
  animation: screen-shine 3s ease-in-out infinite;
}

/* Dashboard: card hover lift + shadow */
@keyframes card-lift {
  to {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.4), 0 0 0 1px var(--border-subtle);
  }
}

.dashboard-card-hover {
  transition: transform var(--transition-normal) ease-out, box-shadow var(--transition-normal) ease-out, border-color var(--transition-fast);
}
.dashboard-card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px -8px rgba(0, 0, 0, 0.4), 0 0 0 1px var(--border-subtle);
  border-color: var(--border-subtle);
}

/* Dashboard: project card left accent */
.dashboard-card-accent {
  border-left: 3px solid transparent;
  transition: border-left-color var(--transition-fast);
}
.dashboard-card-accent:hover {
  border-left-color: var(--button-primary-bg);
}

/* Dashboard: New app card subtle glow pulse */
@keyframes new-app-glow {
  0%, 100% { box-shadow: none; }
  50% { box-shadow: 0 0 0 1px rgba(var(--accent-rgb), 0.2); }
}
.dashboard-new-app-card {
  animation: new-app-glow 2.5s ease-in-out infinite;
}

/* Dashboard: staggered list entrance */
@keyframes stagger-in {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-stagger-in {
  animation: stagger-in 0.4s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Dashboard: subtle CTA pulse (empty state) */
@keyframes cta-pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(var(--accent-rgb), 0.25); }
  50% { box-shadow: 0 0 0 12px rgba(var(--accent-rgb), 0); }
}

.animate-cta-pulse {
  animation: cta-pulse 2s ease-in-out infinite;
}

/* Editor: building indicator glow (theme accent) */
@keyframes building-glow {
  0%, 100% { box-shadow: 0 0 12px rgba(var(--accent-rgb), 0.15), 0 0 0 1px rgba(var(--accent-rgb), 0.2); }
  50% { box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.25), 0 0 0 1px rgba(var(--accent-rgb), 0.35); }
}

.animate-building-glow {
  animation: building-glow 2s ease-in-out infinite;
}

/* Dashboard: skeleton loading */
@keyframes skeleton-pulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 1; }
}

.animate-skeleton {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

/* Contact: success checkmark */
@keyframes success-scale {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

.animate-success-check {
  animation: success-scale 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Editor: Ready/LIVE badge one-time pop when build goes live */
.animate-ready-pop {
  animation: success-scale 0.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Chat: typing cursor blink (block style) — slow, readable pace */
@keyframes cursor-blink {
  0%, 45% { opacity: 1; }
  50%, 100% { opacity: 0; }
}
.animate-cursor-blink {
  animation: cursor-blink 1.2s step-end infinite;
}

/* Chat: message row entrance — opacity only, no translate (no double bounce) */
@keyframes chat-message-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
.animate-chat-message-in {
  animation: chat-message-in 0.2s ease-out forwards;
}

/* Chat: per-word reveal when streaming — smooth fade, no bounce */
@keyframes chat-word-in {
  from { opacity: 0; }
  to { opacity: 1; }
}
.animate-chat-word-in {
  animation: chat-word-in 0.22s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Chat: assistant message — full-box fog fill. Tokens: --chat-assistant-accent-color, --chat-assistant-accent-opacity. */
.chat-accent-full-box-v2 {
  border-left: none;
  background: radial-gradient(
    ellipse 140% 140% at 50% 50%,
    color-mix(in srgb, var(--chat-assistant-accent-color) calc(var(--chat-assistant-accent-opacity) * 35 * 1%)) 0%,
    transparent 72%
  );
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  margin-left: 0.125rem;
}

/* Landing: full-page scroll snap (slide-like) */
.landing-scroll-container {
  scroll-behavior: smooth;
  scroll-snap-type: y mandatory;
}
.landing-section {
  scroll-snap-align: center;
  scroll-snap-stop: normal;
}

/* Landing: staggered word reveal in hero */
@keyframes word-reveal {
  from {
    opacity: 0;
    transform: translateY(0.4em);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.animate-word-reveal {
  opacity: 0;
  animation: word-reveal 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
  display: inline-block;
}

/* Landing: gradient text shimmer on hero highlight word */
@keyframes gradient-text-shine {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
.gradient-text-hero {
  background: linear-gradient(
    90deg,
    var(--text-primary) 0%,
    var(--link-default) 25%,
    var(--link-hover) 50%,
    var(--link-default) 75%,
    var(--text-primary) 100%
  );
  background-size: 200% auto;
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradient-text-shine 4s ease-in-out infinite;
}

/* Respect prefers-reduced-motion: disable non-essential animations */
@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-fade-in-fast,
  .animate-word-reveal,
  .animate-stagger-in,
  .animate-building-glow,
  .animate-cta-pulse,
  .animate-success-check,
  .animate-ready-pop,
  .animate-cursor-blink,
  .animate-chat-message-in,
  .animate-chat-word-in,
  .animate-live-glow,
  .animate-screen-shine,
  .dashboard-new-app-card,
  .animate-skeleton,
  .gradient-text-hero {
    animation: none !important;
  }
  .animate-fade-in,
  .animate-fade-in-fast,
  .animate-word-reveal,
  .animate-success-check,
  .animate-ready-pop,
  .animate-chat-message-in,
  .animate-chat-word-in {
    opacity: 1;
    transform: none;
  }
  .dashboard-card-hover:hover {
    transform: none;
  }
}
